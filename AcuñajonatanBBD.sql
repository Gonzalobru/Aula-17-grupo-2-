CREATE DATABASE PELU_CANINA;
USE PELU_CANINA;

CREATE TABLE DUEÑO (
DNI INT NOT NULL,
NOMBRE VARCHAR(50) NOT NULL,
APELLIDO VARCHAR(50) NOT NULL,
TELEFONO INT,
DIRECCION VARCHAR(150),
PRIMARY KEY(DNI)
);
CREATE TABLE PERRO (
ID_PERRO INT NOT NULL auto_increment,
NOMBRE VARCHAR(150),
FECHA_NAC DATE,
SEXO VARCHAR (15),
DNI_DUEÑO INT NOT NULL,
PRIMARY KEY(ID_PERRO),
FOREIGN KEY(DNI_DUEÑO) REFERENCES DUEÑO(DNI),
INDEX ID_NOMBREPERRO(NOMBRE)
);
CREATE TABLE HISTORIAL (
ID_HISTORIAL INT NOT NULL auto_increment,
FECHA DATE,
PERRO VARCHAR(250),
DESCRIPCION VARCHAR(350),
MONTO INT,
PRIMARY KEY(ID_HISTORIAL),
FOREIGN KEY (PERRO) REFERENCES PERRO(NOMBRE)
);
 
INSERT INTO DUEÑO (DNI, NOMBRE, APELLIDO, TELEFONO, DIRECCION) VALUES (24111671, "VALENTINA INES", "GUIAZ", 421233, " CALLE INDEPENDENCIA N°726");
INSERT INTO DUEÑO (DNI, NOMBRE, APELLIDO, TELEFONO, DIRECCION) VALUES (25461825, "OLGA ISABEL", "HERRERA", 457300, " CALLE CHAMICAL N° 752");
INSERT INTO DUEÑO (DNI, NOMBRE, APELLIDO, TELEFONO, DIRECCION) VALUES (33575832, "PEDRO", "CASATARO", 425233, " CALLE BV. MITRE N° 280");
INSERT INTO DUEÑO (DNI, NOMBRE, APELLIDO, TELEFONO, DIRECCION) VALUES (20605311, "HILDA INES", "JUNCOS", 524528, " CALLE BV. SAN JUAN N° 244");
INSERT INTO DUEÑO (DNI, NOMBRE, APELLIDO, TELEFONO, DIRECCION) VALUES (28210414, "MARIA", "IBARRA", 538976, " CALLE VELEZ SARSFIELD N° 785");
INSERT INTO DUEÑO (DNI, NOMBRE, APELLIDO, TELEFONO, DIRECCION) VALUES (21399345, "CLAUDIO ALBERTO", "LUNA", 429216, " CALLE ALTE. BROWN N° 578");

INSERT INTO PERRO (NOMBRE, FECHA_NAC, SEXO, DNI_DUEÑO) VALUES ("CANDY", "2022-06-21", "HEMBRA", 24111671);
INSERT INTO PERRO (NOMBRE, FECHA_NAC, SEXO, DNI_DUEÑO) VALUES ("INDIA", "2020-07-25", "HEMBRA", 25461825);
INSERT INTO PERRO (NOMBRE, FECHA_NAC, SEXO, DNI_DUEÑO) VALUES ("SUNAY", "2022-08-15", "HEMBRA", 33575832);
INSERT INTO PERRO (NOMBRE, FECHA_NAC, SEXO, DNI_DUEÑO) VALUES ("JACK", "2018-07-19", "MACHO", 20605311);
INSERT INTO PERRO (NOMBRE, FECHA_NAC, SEXO, DNI_DUEÑO) VALUES ("TAIGA", "2019-11-30", "MACHO", 28210414);
INSERT INTO PERRO (NOMBRE, FECHA_NAC, SEXO, DNI_DUEÑO) VALUES ("TORTUGA", "2018-10-11", "HEMBRA", 21399345);

INSERT INTO HISTORIAL (FECHA, PERRO, DESCRIPCION, MONTO) VALUES ("2017-09-13", "CANDY", "OVEJERO", 2900); 
INSERT INTO HISTORIAL (FECHA, PERRO, DESCRIPCION, MONTO) VALUES ("2018-10-19", "INDIA", "LABRADOR", 800); 
INSERT INTO HISTORIAL (FECHA, PERRO, DESCRIPCION, MONTO) VALUES ("2021-05-11", "SUNAY", "BORDER COLLIE", 900); 
INSERT INTO HISTORIAL (FECHA, PERRO, DESCRIPCION, MONTO) VALUES ("2022-12-07", "JACK", "CHIHUAHUA", 12000); 
INSERT INTO HISTORIAL (FECHA, PERRO, DESCRIPCION, MONTO) VALUES ("2022-04-22", "TAIGA", "MANTONEGRO", 5800); 
INSERT INTO HISTORIAL (FECHA, PERRO, DESCRIPCION, MONTO) VALUES ("2018-07-03", "TORTUGA", "TORTUGA", 1000);

/*
REALICE LOS EJERCICIOS 7 Y 12
*/

SELECT NOMBRE FROM PERRO 
WHERE SEXO = "HEMBRA" AND DATE (FECHA_NAC)>= "2020-01-01"
AND DATE (FECHA_NAC) <="2022-01-01";

SELECT SUM(MONTO) FROM HISTORIAL;

SELECT * FROM PERRO